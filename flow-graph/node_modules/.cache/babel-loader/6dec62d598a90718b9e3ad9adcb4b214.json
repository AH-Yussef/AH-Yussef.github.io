{"remainingRequest":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/Control_Systems/signal-flow-graph-solver/node_modules/babel-loader/lib/index.js!/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/Control_Systems/signal-flow-graph-solver/node_modules/eslint-loader/index.js??ref--13-0!/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/Control_Systems/signal-flow-graph-solver/src/assemblyLineComponents/machine.js","dependencies":[{"path":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/Control_Systems/signal-flow-graph-solver/src/assemblyLineComponents/machine.js","mtime":1610399453443},{"path":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/Control_Systems/signal-flow-graph-solver/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/Control_Systems/signal-flow-graph-solver/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/Control_Systems/signal-flow-graph-solver/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvYWxpaGFzc2FuL1RoZV9MT0wvUHJvamVjdHMvY29sbGFnZV9yZWxhdGVkL1NlY29uZFllYXIvQ29udHJvbF9TeXN0ZW1zL3NpZ25hbC1mbG93LWdyYXBoLXNvbHZlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9hbGloYXNzYW4vVGhlX0xPTC9Qcm9qZWN0cy9jb2xsYWdlX3JlbGF0ZWQvU2Vjb25kWWVhci9Db250cm9sX1N5c3RlbXMvc2lnbmFsLWZsb3ctZ3JhcGgtc29sdmVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL2FsaWhhc3Nhbi9UaGVfTE9ML1Byb2plY3RzL2NvbGxhZ2VfcmVsYXRlZC9TZWNvbmRZZWFyL0NvbnRyb2xfU3lzdGVtcy9zaWduYWwtZmxvdy1ncmFwaC1zb2x2ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMvYWxpaGFzc2FuL1RoZV9MT0wvUHJvamVjdHMvY29sbGFnZV9yZWxhdGVkL1NlY29uZFllYXIvQ29udHJvbF9TeXN0ZW1zL3NpZ25hbC1mbG93LWdyYXBoLXNvbHZlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9hbGloYXNzYW4vVGhlX0xPTC9Qcm9qZWN0cy9jb2xsYWdlX3JlbGF0ZWQvU2Vjb25kWWVhci9Db250cm9sX1N5c3RlbXMvc2lnbmFsLWZsb3ctZ3JhcGgtc29sdmVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBnc2FwIGZyb20gJ2dzYXAnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vc3RvcmUnOwppbXBvcnQgeyBBc3NlbWJseUxpbmVDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudC5qcyc7CmV4cG9ydCB2YXIgTWFjaGluZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Fzc2VtYmx5TGluZUNvbXBvbmVuKSB7CiAgX2luaGVyaXRzKE1hY2hpbmUsIF9Bc3NlbWJseUxpbmVDb21wb25lbik7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoTWFjaGluZSk7CgogIGZ1bmN0aW9uIE1hY2hpbmUoeCwgeSkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNYWNoaW5lKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHgsIHkpOwogICAgX3RoaXMuY29kZSA9IF90aGlzLl9nZW5lcmF0ZUNvZGUoKTsKICAgIF90aGlzLmlzTWFjaGluZSA9IHRydWU7CiAgICBfdGhpcy5maWxsQ29sb3IgPSAicmdiKDE4NywxNDMsMjA2KSI7CgogICAgX3RoaXMuX2NyZWF0ZSgpOwoKICAgIF90aGlzLl9hZGRFdmVudExpc3RlbmVycygpOwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhNYWNoaW5lLCBbewogICAga2V5OiAiX2NyZWF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZSgpIHsKICAgICAgdmFyIGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvYXJkIik7CiAgICAgIHZhciBzdmducyA9ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI7IC8vdmFyaWFibGUgZm9yIHRoZSBuYW1lc3BhY2UKCiAgICAgIHZhciBuZXdNYWNoaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2Z25zLCAiY2lyY2xlIik7CiAgICAgIHRoaXMud2lkdGggPSAzLjI7CiAgICAgIGdzYXAuc2V0KG5ld01hY2hpbmUsIHsKICAgICAgICBhdHRyOiB7CiAgICAgICAgICBjeDogdGhpcy5jZW50ZXIueCwKICAgICAgICAgIGN5OiB0aGlzLmNlbnRlci55LAogICAgICAgICAgcjogIjEuNnJlbSIsCiAgICAgICAgICBmaWxsOiB0aGlzLmZpbGxDb2xvciwKICAgICAgICAgIHN0cm9rZTogImJsYWNrIiwKICAgICAgICAgICdzdHJva2Utd2lkdGgnOiAiMnB4IgogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHZhciBuZXdNYWNoaW5lTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnbnMsICJ0ZXh0Iik7CiAgICAgIG5ld01hY2hpbmVMYWJlbC50ZXh0Q29udGVudCA9ICJNIi5jb25jYXQodGhpcy5jb2RlKTsKICAgICAgZ3NhcC5zZXQobmV3TWFjaGluZUxhYmVsLCB7CiAgICAgICAgYXR0cjogewogICAgICAgICAgeDogdGhpcy5jZW50ZXIueCwKICAgICAgICAgIHk6IHRoaXMuY2VudGVyLnksCiAgICAgICAgICAidGV4dC1hbmNob3IiOiAibWlkZGxlIiwKICAgICAgICAgIGZpbGw6ICJ3aGl0ZSIsCiAgICAgICAgICAiZm9udC1zaXplIjogIm1lZGl1bSIsCiAgICAgICAgICBkeTogIjAuNHJlbSIKICAgICAgICB9LAogICAgICAgIGNzczogewogICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLAogICAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnCiAgICAgICAgfQogICAgICB9KTsKICAgICAgYm9hcmQuYXBwZW5kQ2hpbGQobmV3TWFjaGluZSk7CiAgICAgIGJvYXJkLmFwcGVuZENoaWxkKG5ld01hY2hpbmVMYWJlbCk7CiAgICAgIHRoaXMuY29tcG9uZW50ID0gbmV3TWFjaGluZTsKICAgICAgdGhpcy5jb21wb25lbnRMYWJlbCA9IG5ld01hY2hpbmVMYWJlbDsKCiAgICAgIHRoaXMuX2FkZENvbm5lY3Rpb25Qb2ludHMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVQb3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVBvcyh4LCB5KSB7CiAgICAgIHRoaXMudXBkYXRlQ2VudGVyKHgsIHkpOwoKICAgICAgdGhpcy5fdXBkYXRlQ29ubmVjdGlvblBvaW50c1BvcygpOwoKICAgICAgdGhpcy5jb21wb25lbnQuc2V0QXR0cmlidXRlKCJjeCIsIHRoaXMuY2VudGVyLngpOwogICAgICB0aGlzLmNvbXBvbmVudC5zZXRBdHRyaWJ1dGUoImN5IiwgdGhpcy5jZW50ZXIueSk7CiAgICAgIHRoaXMuY29tcG9uZW50TGFiZWwuc2V0QXR0cmlidXRlKCJ4IiwgdGhpcy5jZW50ZXIueCk7CiAgICAgIHRoaXMuY29tcG9uZW50TGFiZWwuc2V0QXR0cmlidXRlKCJ5IiwgdGhpcy5jZW50ZXIueSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlRmlsbENvbG9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVGaWxsQ29sb3IocmdiQ29sb3IpIHsKICAgICAgdGhpcy5maWxsQ29sb3IgPSByZ2JDb2xvcjsKICAgICAgdGhpcy5jb21wb25lbnQuc2V0QXR0cmlidXRlKCJmaWxsIiwgcmdiQ29sb3IpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlc2V0Q29sb3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0Q29sb3IoKSB7CiAgICAgIHRoaXMuZmlsbENvbG9yID0gInJnYigxODcsMTQzLDIwNikiOwogICAgICB0aGlzLmNvbXBvbmVudC5zZXRBdHRyaWJ1dGUoImZpbGwiLCB0aGlzLmZpbGxDb2xvcik7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgIE1hY2hpbmUuYXZhaWxhYmxlQ29kZXMucHVzaCh0aGlzLmNvZGUpOwogICAgICBzdG9yZS5nZXR0ZXJzLm1hY2hpbmVzLmRlbGV0ZSh0aGlzLmNvZGUpOwogICAgICB0aGlzLnJlbW92ZVNlbGYoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2VuZXJhdGVDb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2VuZXJhdGVDb2RlKCkgewogICAgICBpZiAoTWFjaGluZS5hdmFpbGFibGVDb2Rlcy5sZW5ndGggPiAwKSByZXR1cm4gTWFjaGluZS5hdmFpbGFibGVDb2Rlcy5wb3AoKTtlbHNlIHJldHVybiBNYWNoaW5lLmNvZGVDb3VudCsrOwogICAgfSAvL21vdmVtZW50CgogIH0sIHsKICAgIGtleTogIl9tb3ZlTW91c2VEb3duSGFuZGxpbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9tb3ZlTW91c2VEb3duSGFuZGxpbmcoKSB7CiAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTsKCiAgICAgIHRoaXMuX3RyYWNrTW92ZW1lbnQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfdHJhY2tNb3ZlbWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3RyYWNrTW92ZW1lbnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGhlYWRlck9mZnNldEhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoZWFkZXIiKS5vZmZzZXRIZWlnaHQ7CiAgICAgIHZhciB0cmFja2VyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghX3RoaXMyLm1vdXNlRG93biB8fCAhX3RoaXMyLm1vdXNlT25Cb2FyZCgpKSB7CiAgICAgICAgICBjbGVhckludGVydmFsKHRyYWNrZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgdXBkYXRlZFggPSB3aW5kb3cubW91c2VYOwogICAgICAgICAgdmFyIHVwZGF0ZWRZID0gd2luZG93Lm1vdXNlWSAtIGhlYWRlck9mZnNldEhlaWdodDsKCiAgICAgICAgICBfdGhpczIudXBkYXRlUG9zKHVwZGF0ZWRYLCB1cGRhdGVkWSk7CgogICAgICAgICAgX3RoaXMyLl91cGRhdGVDb25uZWN0b3JzUG9zKCk7CiAgICAgICAgfQogICAgICB9LCAxMCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2FkZEV2ZW50TGlzdGVuZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5jb21wb25lbnQub25tb3VzZWRvd24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLl9tb3ZlTW91c2VEb3duSGFuZGxpbmcoKTsKCiAgICAgICAgX3RoaXMzLnNldFNlbGZBc1NlbGVjdGVkKCk7CiAgICAgIH07CgogICAgICB0aGlzLmNvbXBvbmVudC5vbm1vdXNldXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5fbW92ZU1vdXNlVXBIYW5kbGluZygpOwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImZsYXNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmbGFzaChyZ2JDb2xvcikgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciBmbGFzaGVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5jb21wb25lbnQuc2V0QXR0cmlidXRlKCJzdHJva2UiLCByZ2JDb2xvcik7CgogICAgICAgIF90aGlzNC5jb21wb25lbnQuc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLCAnOHB4Jyk7CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM0LmNvbXBvbmVudC5zZXRBdHRyaWJ1dGUoInN0cm9rZSIsICJibGFjayIpOwoKICAgICAgICAgIF90aGlzNC5jb21wb25lbnQuc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLCAnMnB4Jyk7CiAgICAgICAgfSwgMTUwKTsKICAgICAgfSwgMzAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbChmbGFzaGVyKTsKICAgICAgfSwgMTAwMCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTWFjaGluZTsKfShBc3NlbWJseUxpbmVDb21wb25lbnQpOwoKX2RlZmluZVByb3BlcnR5KE1hY2hpbmUsICJjb2RlQ291bnQiLCAwKTsKCl9kZWZpbmVQcm9wZXJ0eShNYWNoaW5lLCAiYXZhaWxhYmxlQ29kZXMiLCBbXSk7"},{"version":3,"sources":["/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/Control_Systems/signal-flow-graph-solver/src/assemblyLineComponents/machine.js"],"names":["gsap","store","AssemblyLineComponent","Machine","x","y","code","_generateCode","isMachine","fillColor","_create","_addEventListeners","board","document","getElementById","svgns","newMachine","createElementNS","width","set","attr","cx","center","cy","r","fill","stroke","newMachineLabel","textContent","dy","css","userSelect","pointerEvents","appendChild","component","componentLabel","_addConnectionPoints","updateCenter","_updateConnectionPointsPos","setAttribute","rgbColor","availableCodes","push","getters","machines","delete","removeSelf","length","pop","codeCount","mouseDown","_trackMovement","headerOffsetHeight","offsetHeight","tracker","setInterval","mouseOnBoard","clearInterval","updatedX","window","mouseX","updatedY","mouseY","updatePos","_updateConnectorsPos","onmousedown","_moveMouseDownHandling","setSelfAsSelected","onmouseup","_moveMouseUpHandling","flasher","setTimeout"],"mappings":"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","sourcesContent":["import gsap from 'gsap';\nimport store from '../store';\nimport { AssemblyLineComponent } from './component.js';\n\nexport class Machine extends AssemblyLineComponent{\n  static codeCount = 0;\n  static availableCodes = [];\n\n  constructor(x, y) {\n    super(x, y);\n    this.code = this._generateCode();\n    this.isMachine = true;\n    this.fillColor = \"rgb(187,143,206)\";\n    this._create();\n    this._addEventListeners();\n  }\n\n  _create() {\n    const board = document.getElementById(\"board\");\n    const svgns = \"http://www.w3.org/2000/svg\"; //variable for the namespace\n    const newMachine = document.createElementNS(svgns, \"circle\");\n    this.width = 3.2;\n    gsap.set(newMachine, {\n      attr: {\n        cx: this.center.x, cy: this.center.y, r: \"1.6rem\",\n        fill: this.fillColor, stroke: \"black\", 'stroke-width': \"2px\", \n      }\n    });\n    \n    const newMachineLabel = document.createElementNS(svgns, \"text\");\n    newMachineLabel.textContent = `M${this.code}`;\n    gsap.set(newMachineLabel, {\n      attr: {\n        x: this.center.x, y: this.center.y, \"text-anchor\": \"middle\", \n        fill: \"white\", \"font-size\": \"medium\", dy: \"0.4rem\",\n      },\n      css: {\n        userSelect: 'none', pointerEvents: 'none',\n      }\n    })\n\n    board.appendChild(newMachine);\n    board.appendChild(newMachineLabel);\n    this.component = newMachine;\n    this.componentLabel = newMachineLabel;\n\n    this._addConnectionPoints();\n  }\n\n  updatePos(x, y){\n    this.updateCenter(x, y);\n    this._updateConnectionPointsPos();\n\n    this.component.setAttribute(\"cx\", this.center.x);\n    this.component.setAttribute(\"cy\", this.center.y);\n\n    this.componentLabel.setAttribute(\"x\", this.center.x);\n    this.componentLabel.setAttribute(\"y\", this.center.y);\n  }\n\n  updateFillColor(rgbColor) {\n    this.fillColor = rgbColor;\n    this.component.setAttribute(\"fill\", rgbColor);\n  }\n  resetColor() {\n    this.fillColor = \"rgb(187,143,206)\";\n    this.component.setAttribute(\"fill\", this.fillColor);\n  }\n\n  remove() {\n    Machine.availableCodes.push(this.code);\n    store.getters.machines.delete(this.code);\n    this.removeSelf();\n  }\n\n  _generateCode() {\n    if(Machine.availableCodes.length > 0) return Machine.availableCodes.pop();\n    else return Machine.codeCount++;\n  }\n\n  //movement\n  _moveMouseDownHandling() {\n    this.mouseDown = true;\n    this._trackMovement();\n  }\n\n  _trackMovement(){\n    const headerOffsetHeight = document.getElementById(\"header\").offsetHeight;\n\n    const tracker = setInterval(() => {\n      if(!this.mouseDown || !this.mouseOnBoard()) {\n        clearInterval(tracker);\n      }\n      else {\n        const updatedX = window.mouseX;\n        const updatedY = window.mouseY - headerOffsetHeight;\n        this.updatePos(updatedX, updatedY);\n        this._updateConnectorsPos();\n      }\n    }, 10); \n  }\n\n  _addEventListeners() {\n    this.component.onmousedown = () => {\n      this._moveMouseDownHandling();\n      this.setSelfAsSelected();\n    }\n    this.component.onmouseup = () => this._moveMouseUpHandling();\n  }\n\n  flash(rgbColor){\n    const flasher = setInterval(() => {\n      this.component.setAttribute(\"stroke\", rgbColor);\n      this.component.setAttribute(\"stroke-width\", '8px');\n\n      setTimeout(() => {\n        this.component.setAttribute(\"stroke\", \"black\");\n        this.component.setAttribute(\"stroke-width\", '2px');\n      }, 150);\n    }, 300);\n\n    setTimeout(function( ) { \n      clearInterval( flasher ); \n    }, 1000);\n  }\n}"]}]}